(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{LOpF:function(t,o,e){"use strict";e.r(o),e.d(o,"CodigoPageModule",(function(){return b}));var n=e("Valr"),i=e("QJY3"),r=e("DUip"),s=e("sPEm"),a=e("mrSG"),c=e("qTy+"),u=e("QdjV"),p=e("TYT/"),d=e("j+Tt"),l=e("o8Qb"),g=[{path:"",component:function(){function t(t,o,e,n,r,s){this.alertController=t,this.sesion=o,this.formBuilder=e,this.util=n,this.router=r,this.storage=s,this.codigo_form=this.formBuilder.group({codigo:["",i.l.compose([i.l.required])],privacidad:[void 0,i.l.required]})}return t.prototype.ngOnInit=function(){},t.prototype.ionViewDidEnter=function(){this.usuario=this.sesion.getUsuario(),this.presentAlert()},t.prototype.presentAlert=function(){return Object(a.b)(this,void 0,void 0,(function(){var t;return Object(a.e)(this,(function(o){switch(o.label){case 0:return[4,this.alertController.create({cssClass:"alert",message:"Te hemos reenviado el mensaje a "+this.usuario})];case 1:return[4,(t=o.sent()).present()];case 2:return o.sent(),setTimeout((function(){t.dismiss()}),3e3),[2]}}))}))},t.prototype.comprobarCodigo=function(){var t=this;this.codigo_introducido=this.codigo_form.get("codigo").value,3==this.codigo_introducido.length&&(this.util.mostrarCargando(),this.util.consultaPOSTsinToken("login/codigo",{email:this.usuario,codigo:this.codigo_introducido}).then((function(o){t.respuesta=o,t.storage.set("usuario_primer_login","true"),t.util.consultaPOSTsinToken("login",{email:t.usuario,password:t.codigo_introducido}).then((function(o){t.datos_login=o,t.storage.set("usuario_token",t.datos_login.token),t.sesion.guardarToken(t.datos_login.token),t.util.quitarCargando(),t.router.navigateByUrl("/primera-sesion")})).catch((function(o){t.util.quitarCargando(),t.util.presentarToast("Oops.. parece que algo no ha ido bien")}))})).catch((function(o){t.util.quitarCargando(),t.util.presentarToast("Oops.. parece que algo no ha ido bien")})))},t.\u0275fac=function(o){return new(o||t)(p.Kb(s.a),p.Kb(c.a),p.Kb(i.a),p.Kb(u.a),p.Kb(r.g),p.Kb(d.b))},t.\u0275cmp=p.Eb({type:t,selectors:[["app-codigo"]],decls:43,vars:33,consts:[[1,"background"],[3,"formGroup"],["src","./assets/imgs/bocadillo-corazon.png",1,"imagenes"],[1,"entrada"],["type","text","formControlName","codigo","maxlength","3",1,"input_codigo",3,"ionChange"],[1,"pie"],[1,"contenedor_imagen"],["src","./assets/imgs/spam.svg",1,"imagenes_pie"],["src","./assets/imgs/despiste.svg",1,"imagenes_pie"],["src","./assets/imgs/globo.svg",1,"imagenes_pie_globo"]],template:function(t,o){1&t&&(p.Pb(0,"ion-content",0),p.Pb(1,"form",1),p.Pb(2,"h1"),p.rc(3),p.ac(4,"translate"),p.Ob(),p.Lb(5,"img",2),p.Pb(6,"h3"),p.rc(7),p.ac(8,"translate"),p.Ob(),p.Pb(9,"p"),p.rc(10),p.ac(11,"translate"),p.ac(12,"translate"),p.Ob(),p.Pb(13,"p"),p.rc(14),p.ac(15,"translate"),p.Ob(),p.Pb(16,"div",3),p.Pb(17,"ion-input",4),p.Xb("ionChange",(function(){return o.comprobarCodigo()})),p.Pb(18,"h3"),p.rc(19,"H-"),p.Ob(),p.Ob(),p.Ob(),p.Ob(),p.Pb(20,"div",5),p.Pb(21,"h4"),p.rc(22),p.ac(23,"translate"),p.Ob(),p.Pb(24,"ion-item"),p.Pb(25,"div",6),p.Lb(26,"img",7),p.Ob(),p.Pb(27,"p"),p.rc(28),p.ac(29,"translate"),p.Ob(),p.Ob(),p.Pb(30,"ion-item"),p.Pb(31,"div",6),p.Lb(32,"img",8),p.Ob(),p.Pb(33,"p"),p.rc(34),p.ac(35,"translate"),p.ac(36,"translate"),p.Ob(),p.Ob(),p.Pb(37,"ion-item"),p.Pb(38,"div",6),p.Lb(39,"img",9),p.Ob(),p.Pb(40,"p"),p.rc(41),p.ac(42,"translate"),p.Ob(),p.Ob(),p.Ob(),p.Ob()),2&t&&(p.Ab(1),p.ec("formGroup",o.codigo_form),p.Ab(2),p.sc(p.bc(4,13,"codigo_cadena1")),p.Ab(4),p.sc(p.bc(8,15,"codigo_cadena2")),p.Ab(3),p.vc("",p.bc(11,17,"codigo_cadena3")," ",o.usuario," ",p.bc(12,19,"codigo_cadena3b"),""),p.Ab(4),p.sc(p.bc(15,21,"codigo_cadena4")),p.Ab(8),p.sc(p.bc(23,23,"codigo_cadena5")),p.Ab(6),p.sc(p.bc(29,25,"codigo_cadena6")),p.Ab(6),p.vc("",p.bc(35,27,"codigo_cadena7a")," ",o.usuario," ",p.bc(36,29,"codigo_cadena7b"),""),p.Ab(7),p.sc(p.bc(42,31,"codigo_cadena8")))},directives:[s.i,i.m,i.i,i.c,s.p,s.T,i.h,i.b,i.e,s.q],pipes:[l.c],styles:["form[_ngcontent-%COMP%]{vertical-align:middle;text-align:center;color:#fff;margin-top:40px;padding-right:15px;padding-left:15px}.imagenes[_ngcontent-%COMP%]{width:35%;display:inline-table;margin-top:26px}.imagenes_pie[_ngcontent-%COMP%]{width:60px}.imagenes_pie[_ngcontent-%COMP%], .imagenes_pie_globo[_ngcontent-%COMP%]{display:inline-table;margin-bottom:26px}.imagenes_pie_globo[_ngcontent-%COMP%]{width:30px;margin-left:13px}.contenedor_imagen[_ngcontent-%COMP%]{width:85px}.entrada[_ngcontent-%COMP%]{width:100%;display:-webkit-inline-box}.input_codigo[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-right:5px;margin-left:-30px}.input_codigo[_ngcontent-%COMP%]{border:1px solid #fff;border-radius:6px;height:50px;width:70px;margin:0 auto!important;text-align:left;font-family:HKGroteskBold!important;font-size:22px;--color:#fff;--placeholder-color:#fff;--placeholder-opacity:1;--padding-start:15px!important;--padding-end:15px!important}.pie[_ngcontent-%COMP%]{margin-top:50px;padding-top:50px;padding-right:15px;padding-left:15px;background:#e5e5e5;color:#212322}.pie[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0;width:100%}ion-item[_ngcontent-%COMP%]{--border-width:0px!important;--highlight-color-focused:none!important;--inner-border-width:0px!important;--full-highlight-height:none}"]}),t}()}],b=function(){function t(){}return t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({factory:function(o){return new(o||t)},imports:[[n.b,i.d,i.k,s.K,r.j.forChild(g),l.b.forChild()]]}),t}()},QdjV:function(t,o,e){"use strict";e.d(o,"a",(function(){return p}));var n=e("mrSG"),i=e("cUzu"),r=e("AytR"),s=e("qTy+"),a=e("TYT/"),c=e("j+Tt"),u=e("sPEm"),p=function(){function t(t,o,e,n,i,s){this.http=t,this.sesion=o,this.storage=e,this.loadingController=n,this.alertController=i,this.toastController=s,this.archivoAPIUrls="assets/data/api.json",this.apiUrl=r.a,this.token="",console.log("Dentro del servicio API: "+this.apiUrl),this.getIndex()}return t.prototype.getIndex=function(){var t=this;return new Promise((function(o){t.http.get(t.apiUrl+"/").subscribe((function(t){o(t),console.log(t)}),(function(t){console.log(t)}))}))},t.prototype.obtenerURLAPI=function(t){return this.apiUrl+"/"+t},t.prototype.consultaGET=function(t){var o=this.obtenerToken();return this.http.get(this.obtenerURLAPI(t),{headers:o}).toPromise()},t.prototype.consultaPOST=function(t,o){var e=this.obtenerToken();return this.http.post(this.obtenerURLAPI(t),o,{headers:e}).toPromise()},t.prototype.consultaPOSTsinToken=function(t,o){return this.http.post(this.obtenerURLAPI(t),o).toPromise()},t.prototype.consultaPOSTImagen=function(t,o){var e=this.obtenerToken(),n=new FormData;return n.append("imagen",o,o.name),this.http.post(this.obtenerURLAPI(t),n,{headers:e}).toPromise()},t.prototype.consultaPUT=function(t,o){var e=this.obtenerToken();return this.http.put(this.obtenerURLAPI(t),o,{headers:e}).toPromise()},t.prototype.consultaDELETE=function(t){var o=this.obtenerToken();return this.http.delete(this.obtenerURLAPI(t),{headers:o}).toPromise()},t.prototype.obtenerToken=function(){return new i.c({Authorization:this.sesion.obtenerToken()})},t.prototype.mostrarCargando=function(){return Object(n.b)(this,void 0,void 0,(function(){return Object(n.e)(this,(function(t){switch(t.label){case 0:return[4,this.loadingController.create({duration:5e3,spinner:"crescent",translucent:!0,cssClass:"custom-class custom-loading"})];case 1:return[4,t.sent().present()];case 2:return[2,t.sent()]}}))}))},t.prototype.quitarCargando=function(){var t=this;setTimeout((function(){t.loadingController.dismiss()}),500)},t.prototype.presentAlert=function(t){return Object(n.b)(this,void 0,void 0,(function(){var o;return Object(n.e)(this,(function(e){switch(e.label){case 0:return[4,this.alertController.create({cssClass:"alert",message:t})];case 1:return[4,(o=e.sent()).present()];case 2:return e.sent(),setTimeout((function(){o.dismiss()}),3e3),[2]}}))}))},t.prototype.presentAlertError=function(t){return Object(n.b)(this,void 0,void 0,(function(){var o;return Object(n.e)(this,(function(e){switch(e.label){case 0:return[4,this.alertController.create({cssClass:"alert_pago_error",message:t})];case 1:return[4,(o=e.sent()).present()];case 2:return e.sent(),setTimeout((function(){o.dismiss()}),3e3),[2]}}))}))},t.prototype.presentarToast=function(t,o,e){return void 0===o&&(o="secondary"),void 0===e&&(e=2e3),Object(n.b)(this,void 0,void 0,(function(){return Object(n.e)(this,(function(n){switch(n.label){case 0:return[4,this.toastController.create({message:t,duration:e,color:o,buttons:[{text:"X",role:"cancel",handler:function(){console.log("Cancel clicked")}}]})];case 1:return n.sent().present(),[2]}}))}))},t.miUtil=void 0,t.\u0275fac=function(o){return new(o||t)(a.Tb(i.a),a.Tb(s.a),a.Tb(c.b),a.Tb(u.M),a.Tb(u.a),a.Tb(u.U))},t.\u0275prov=a.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},"qTy+":function(t,o,e){"use strict";e.d(o,"a",(function(){return s}));var n=e("mrSG"),i=e("TYT/"),r=e("j+Tt"),s=function(){function t(t){this.storage=t,this.miSesion=void 0}return t.prototype.obtenerToken=function(){return this.token},t.prototype.guardarToken=function(t){this.token=t},t.prototype.obtenerRol=function(){return this.rol},t.prototype.guardarRol=function(t){this.rol=t},t.prototype.crearSesion=function(){var t=this;this.storage.get("usuario_token").then((function(o){t.token=o}))},t.prototype.login=function(t){this.datosUsuario=t},t.prototype.getUsuario=function(){return this.datosUsuario},t.prototype.getPlan=function(t){return Object(n.b)(this,void 0,void 0,(function(){return Object(n.e)(this,(function(t){switch(t.label){case 0:return[4,this.storage.get("plan").then((function(t){}))];case 1:return t.sent(),[2]}}))}))},t.\u0275fac=function(o){return new(o||t)(i.Tb(r.b))},t.\u0275prov=i.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}]);